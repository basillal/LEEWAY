<div *ngIf="openSidebarMob" class="router_wrapper_mob fixed top-0 left-0 bg-white/85 backdrop-blur-lg z-50 flex flex-col min-h-screen w-[50vw]">
  <!-- Header with Placeholder Image and Close Button -->
  <div class="p-4 border-b border-gray-200/50 sticky top-0 z-10 bg-white/85">
    <div class="flex flex-col items-center">
      <img src="assets/kjusys.png" class="cursor-pointer" alt="KJCLogo" (click)="navigateToHome()" style="height: 36px;" />
    </div>
    <!-- Floating Close Button -->
    <div class="close_btn_wrapper cursor-pointer absolute top-4 right-[-15px] z-50" style="width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; background-color: white; border: 1px solid #dbdbdb; border-radius: 15px;" (click)="openSidebarMob = false">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15" fill="none" class="text-gray-800">
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M9.91751 4.00288C10.1941 4.27947 10.1941 4.7279 9.91751 5.00449L7.58534 7.33666L9.91751 9.66883C10.1941 9.94542 10.1941 10.3939 9.91751 10.6704C9.64092 10.947 9.19249 10.947 8.9159 10.6704L6.08293 7.83746C5.80634 7.56088 5.80634 7.11244 6.08293 6.83586L8.9159 4.00288C9.19249 3.72629 9.64092 3.72629 9.91751 4.00288Z"
          fill="currentColor" />
      </svg>
    </div>
  </div>
  <!-- Scrollable Menu List with Hidden Scrollbar -->
  <div class="flex-1 overflow-y-auto p-4 pb-[200px] no-scrollbar" style="max-height: calc(100vh - 80px);">
    <ng-container *ngFor="let menu of filteredMenu">
      <div class="router_name mb-4" [title]="toSentenceCase(menu.displayName)">
        <div class="flex items-center space-x-2" (click)="opensubmob(menu.id || menu.displayName); !menu.subModule?.length ? openSidebarMob = false : null">
          <span class="icon-wrapper w-6 h-6 flex items-center justify-center rounded p-1" [ngClass]="{'bg-[#dbdbdb]': currentSelectedMenu === menu}" [innerHTML]="menu.icon" style="transform: scale(0.9);"></span>
          <span class="menu-name text-[11px] font-medium text-black flex items-center cursor-pointer hover:text-blue-800 transition duration-150" [ngClass]="{'!text-blue-800': currentSelectedMenu === menu}">
            {{ toSentenceCase(menu.displayName) }}
          </span>
        </div>
        <hr class="divider my-2 border-gray-200/50">
        <div *ngIf="isMenuOpen(menu.id || menu.displayName)" class="router_subname pl-6">
          <ul>
            <li *ngFor="let remote of menu.subModule" class="mb-2">
              <a [routerLink]="[remote.subPath]" [state]="{ back: false }" (click)="menuItemClick(remote, menu); openSidebarMob = false"
                routerLinkActive="active"
                class="flex items-center w-full p-2 text-[10px] text-gray-500 rounded-lg hover:text-blue-800 transition duration-150 ease-in-out"
                [title]="toSentenceCase(remote.displayName)">
                {{ toSentenceCase(remote.displayName) }}
              </a>
            </li>
          </ul>
        </div>
      </div>
    </ng-container>
  </div>
</div>

<div class="sample_posi">
  <div class="sidebar w-auto h-full flex relative">
    <!-- Displaying Icons Sidebar -->
    <div class="no-scrollbar sidebar_default pt-[50px] pl-2 pr-2 w-[45px] h-full flex items-center justify-start shadow-right overflow-y-scroll">
      <ng-container *ngFor="let menu of leftMenu">
        <div
          class="icons p-2 rounded-lg transition-all duration-300 flex flex-col items-center w-full justify-center group"
          (click)="toggleMenu(menu)"
          [attr.title]="menu.displayName">
          <span
            class="icon-wrapper p-2 rounded transition-transform duration-200 group-hover:scale-110 group-hover:bg-blue-100"
            [ngClass]="{'bg-[#dbdbdb]': currentSelectedMenu === menu}"
            [innerHTML]="menu.icon">
          </span>
          <p [ngClass]="{'font-medium': currentSelectedMenu === menu}" class="font-inter text-[10px] text-gray-700 group-hover:text-blue-600 transition-colors duration-200">{{ formattedMenuNames[menu.displayName] }}</p>
        </div>
      </ng-container>
      <div class="mb-96"></div>
    </div>

    <!-- Toggled Sidebar -->
    <div *ngIf="toggleSidebarNew" class="sidebar_toggled" [class.active]="isSidebarToggled">
      <div class="sidebar_contents bg-white/95 backdrop-blur-md rounded-r-xl">
        <!-- Search Bar with Back Arrow on Right -->
        <div class="search_bar flex items-center space-x-2 p-4">
          <div class="relative flex-1">
            <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
            </svg>
            <input class="text-xs w-full pl-10 pr-4 py-2 rounded-full bg-gray-100 border-none focus:bg-gray-200 focus:ring-2 focus:ring-blue-300 transition-all duration-200" type="text" [(ngModel)]="searchTerm" (input)="onSearch()" placeholder="Search menu items..." />
          </div>
          <div class="close_btn_wrapper cursor-pointer flex items-center justify-center w-8 h-8 border border-gray-200 rounded-full hover:bg-gray-100 transition-all duration-200" (click)="closeSidebar()">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 15" fill="none" class="text-gray-800">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M9.91751 4.00288C10.1941 4.27947 10.1941 4.7279 9.91751 5.00449L7.58534 7.33666L9.91751 9.66883C10.1941 9.94542 10.1941 10.3939 9.91751 10.6704C9.64092 10.947 9.19249 10.947 8.9159 10.6704L6.08293 7.83746C5.80634 7.56088 5.80634 7.11244 6.08293 6.83586L8.9159 4.00288C9.19249 3.72629 9.64092 3.72629 9.91751 4.00288Z"
                fill="currentColor" />
            </svg>
          </div>
        </div>
        <!-- Displayed Submodules or Menus Routing -->
        <div class="router_wrapper p-4">
          <ng-container *ngFor="let menu of filteredMenu">
            <div class="router_name mb-3" [title]="toSentenceCase(menu.displayName)">
              <span class="menu-name ms-3 text-xs font-medium text-gray-800 hover:text-blue-600 transition-colors duration-200">{{ toSentenceCase(menu.displayName) }}</span>
              <hr class="divider my-2 border-gray-200/50">
              <div class="router_subname">
                <ul>
                  <li *ngFor="let remote of menu.subModule" class="mb-1">
                    <a [routerLink]="[remote.subPath]" [state]="{ back: false }" (click)="menuItemClick(remote, menu); closeSidebar()"
                      routerLinkActive="active"
                      class="flex items-center w-full p-2 text-[11px] text-gray-600 rounded-lg hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 group"
                      [title]="toSentenceCase(remote.displayName)">
                      {{ toSentenceCase(remote.displayName) }}
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>

<footer class="footer bg-gray-600 py-2 flex justify-center text-center z-50" *ngIf="!isStandaloneMode">
  <p class="text-white text-[10px] font-light">
    Â© Developed by
    <span class="font-medium">Kristu Jayanti Software Development Centre</span>
  </p>
</footer>